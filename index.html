<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ThunderChat</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
   /* ===== Body & General ===== */
body {
  background: linear-gradient(135deg, #e6f0ff 0%, #ffffff 100%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #1f2937;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeInSlide 1s ease forwards;
}

/* ===== Animations ===== */
@keyframes fadeInSlide {
  0% {
    opacity: 0;
    transform: translateY(30px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes popIn {
  0% {
    opacity: 0;
    transform: scale(0.85);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* ===== Container ===== */
#app {
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 20px 40px rgba(3, 102, 214, 0.15);
  width: 100%;
  max-width: 420px;
  padding: 32px;
  box-sizing: border-box;
  animation: popIn 0.6s ease forwards;
}

/* ===== Heading ===== */
h1 {
  font-weight: 800;
  font-size: 2.75rem;
  color: #2563eb; /* Tailwind Blue-600 */
  text-align: center;
  margin-bottom: 28px;
  user-select: none;
  letter-spacing: 0.05em;
}

/* ===== Input fields ===== */
.input {
  width: 100%;
  padding: 14px 18px;
  font-size: 1rem;
  border-radius: 16px;
  border: 2px solid #cbd5e1; /* Tailwind Gray-300 */
  background-color: #f9fafb; /* Tailwind Gray-50 */
  color: #374151; /* Gray-700 */
  box-shadow: inset 0 2px 4px rgb(0 0 0 / 0.05);
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  margin-bottom: 20px;
  outline: none;
}

.input::placeholder {
  color: #9ca3af; /* Gray-400 */
  font-style: italic;
}

.input:focus {
  border-color: #2563eb;
  box-shadow: 0 0 8px #2563ebaa;
  background-color: #ffffff;
}

/* ===== Buttons ===== */
.button {
  width: 100%;
  padding: 14px 0;
  font-size: 1.1rem;
  font-weight: 700;
  border-radius: 16px;
  cursor: pointer;
  border: none;
  transition: background-color 0.3s ease, transform 0.15s ease;
  box-shadow: 0 6px 12px rgb(37 99 235 / 0.4);
  user-select: none;
  margin-bottom: 14px;
}

.button:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 18px rgb(37 99 235 / 0.6);
}

.button:active {
  transform: translateY(-1px);
  box-shadow: 0 6px 12px rgb(37 99 235 / 0.5);
}

/* Register Button */
#register.button {
  background-color: #2563eb;
  color: white;
}

#register.button:hover {
  background-color: #1d4ed8;
}

/* Login Button */
#login.button {
  background-color: #3b82f6;
  color: white;
}

#login.button:hover {
  background-color: #2563eb;
}

/* Logout Button */
#logout.button {
  background-color: #ef4444;
  color: white;
  margin-top: 10px;
}

#logout.button:hover {
  background-color: #dc2626;
}

/* ===== Chat Section ===== */
#chat {
  margin-top: 24px;
}

#messages {
  height: 320px;
  overflow-y: auto;
  background-color: #f3f4f6; /* Gray-100 */
  border-radius: 20px;
  padding: 20px;
  box-shadow: inset 0 6px 10px rgb(0 0 0 / 0.05);
  scroll-behavior: smooth;
}

/* Custom scrollbar for modern browsers */
#messages::-webkit-scrollbar {
  width: 8px;
}
#messages::-webkit-scrollbar-thumb {
  background-color: #93c5fd; /* Blue-300 */
  border-radius: 10px;
}
#messages::-webkit-scrollbar-track {
  background-color: #e0e7ff; /* Indigo-100 */
  border-radius: 10px;
}

/* ===== Chat bubbles ===== */
.chat-bubble {
  max-width: 75%;
  background-color: #bae6fd; /* Light Blue-200 */
  color: #1e40af; /* Blue-900 */
  padding: 14px 20px;
  border-radius: 22px;
  margin-bottom: 12px;
  box-shadow: 0 4px 8px rgb(59 130 246 / 0.3);
  animation: popIn 0.25s ease forwards;
  word-wrap: break-word;
  font-size: 1rem;
  line-height: 1.4;
}

.chat-bubble.self {
  background-color: #3b82f6; /* Blue-500 */
  color: white;
  margin-left: auto;
  box-shadow: 0 6px 12px rgb(29 78 216 / 0.8);
}

/* ===== Message Input ===== */
#messageInput {
  margin-top: 14px;
  border-radius: 18px;
  border: 2px solid #cbd5e1;
  padding: 12px 18px;
  font-size: 1rem;
  box-shadow: inset 0 2px 6px rgb(0 0 0 / 0.06);
  transition: border-color 0.3s ease;
}

#messageInput:focus {
  border-color: #2563eb;
  box-shadow: 0 0 10px #2563ebaa;
  outline: none;
}

/* ===== Responsive & Mobile ===== */
@media (max-width: 480px) {
  #app {
    max-width: 95vw;
    padding: 24px 16px;
    border-radius: 20px;
  }
  
  h1 {
    font-size: 2rem;
  }
  
  #messages {
    height: 280px;
    padding: 16px;
  }
  
  .chat-bubble {
    font-size: 0.95rem;
    padding: 12px 16px;
  }
  
  #messageInput {
    font-size: 0.95rem;
    padding: 10px 14px;
  }
  
  .button {
    font-size: 1rem;
    padding: 12px 0;
    border-radius: 14px;
  }
}

/* ===== Utility ===== */
.text-center {
  text-align: center;
}

   </style>
</head>

<body class="flex flex-col items-center justify-center min-h-screen p-4">
  <div id="auth-section" class="w-full max-w-sm">
    <h2 class="text-2xl font-bold mb-4 text-center">ThunderChat</h2>
    <input id="email" class="w-full p-2 mb-2 rounded bg-gray-700 text-white" type="email" placeholder="Email">
    <input id="password" class="w-full p-2 mb-2 rounded bg-gray-700 text-white" type="password" placeholder="Password">
    <button id="loginBtn" class="w-full p-2 mb-2 bg-blue-600 hover:bg-blue-700 rounded">Login</button>
    <button id="registerBtn" class="w-full p-2 mb-4 bg-green-600 hover:bg-green-700 rounded">Register</button>
  </div>

  <div id="chat-section" class="hidden w-full max-w-md">
    <div class="flex justify-between items-center mb-2">
      <h3 class="text-xl font-semibold">Group Chat</h3>
      <button id="logoutBtn" class="text-sm bg-red-600 px-3 py-1 rounded hover:bg-red-700">Logout</button>
    </div>
    <div id="chat-box" class="chat-box bg-gray-800 p-2 rounded overflow-y-auto h-80 mb-2"></div>
    <div class="flex gap-2">
      <input id="messageInput" class="flex-1 p-2 rounded bg-gray-700 text-white" type="text" placeholder="Type a message...">
      <button id="sendBtn" class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded">Send</button>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
    import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBD4bDQgVtMd9cwq9Hfdz54NYSBcQvPr1Y",
      authDomain: "thunderboundthunderchat.firebaseapp.com",
      databaseURL: "https://thunderboundthunderchat-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "thunderboundthunderchat",
      storageBucket: "thunderboundthunderchat.appspot.com",
      messagingSenderId: "79690962383",
      appId: "1:79690962383:web:fecf12881a13a4fdf22eba"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const loginBtn = document.getElementById("loginBtn");
    const registerBtn = document.getElementById("registerBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const chatSection = document.getElementById("chat-section");
    const authSection = document.getElementById("auth-section");
    const messageInput = document.getElementById("messageInput");
    const sendBtn = document.getElementById("sendBtn");
    const chatBox = document.getElementById("chat-box");

    loginBtn.onclick = () => {
      signInWithEmailAndPassword(auth, emailInput.value, passwordInput.value)
        .then(() => console.log("Logged in"))
        .catch(err => alert(err.message));
    };

    registerBtn.onclick = () => {
      createUserWithEmailAndPassword(auth, emailInput.value, passwordInput.value)
        .then(() => console.log("Registered"))
        .catch(err => alert(err.message));
    };

    logoutBtn.onclick = () => {
      signOut(auth);
    };

    onAuthStateChanged(auth, user => {
      if (user) {
        authSection.classList.add("hidden");
        chatSection.classList.remove("hidden");
      } else {
        authSection.classList.remove("hidden");
        chatSection.classList.add("hidden");
      }
    });

    sendBtn.onclick = () => {
      const msg = messageInput.value.trim();
      if (msg) {
        push(ref(db, "messages"), {
          sender: auth.currentUser.email,
          text: msg
        });
        messageInput.value = "";
      }
    };

    onChildAdded(ref(db, "messages"), snapshot => {
      const { sender, text } = snapshot.val();
      const div = document.createElement("div");
      div.className = "msg";
      div.innerHTML = `<div class="sender">${sender}</div><div>${text}</div>`;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    });
  </script>
</body>

</html>
